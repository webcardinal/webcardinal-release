import{r as t,h as i,g as e}from"./p-104362b3.js";import{B as s}from"./p-08edb5b9.js";const n=new Audio("data:audio/wav;base64,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qJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU="),o=t=>{const{canvas:i}=t,e=i.getContext("2d"),s=e.getImageData(0,0,i.width,i.height);for(let t=0;t<s.data.length;t+=4)s.data[t]=255^s.data[t],s.data[t+1]=255^s.data[t+1],s.data[t+2]=255^s.data[t+2];e.putImageData(s,0,0)};function a(t){const i=t.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth)}function A(t,i,e){e&&"object"==typeof e||(e={}),"boolean"!=typeof e.stopInternalCropping&&(e.stopInternalCropping=!1);const s=i.getContext("2d");if(s.imageSmoothingEnabled=!1,e.points&&6===e.points.length){const[i,n,o,a,A,r,c,h]=e.points;return s.imageSmoothingEnabled=!1,s.drawImage(t,i,n,o,a,A,r,c,h),e.points}const n={width:i.width,height:i.height};if(t instanceof HTMLVideoElement?t.videoWidth&&(n.width=t.videoWidth,n.height=t.videoHeight):(n.width=t.width,n.height=t.height),e.stopInternalCropping){i.width=n.width,i.height=n.height;const e=[0,0,n.width,n.height,0,0,n.width,n.height];return s.drawImage.apply(s,[t,...e]),e}let[o,a]=function(t,i){const e=Math.min(t.width/i.width,t.height/i.height);return[i.width*e,i.height*e]}(n,i);i.width=Math.floor(o),i.height=Math.floor(a);let[A,r]=function(t,i){const e=Math.max(t.width,i.width),s=Math.max(t.height,i.height);return[.5*(e-Math.min(t.width,i.width)),.5*(s-Math.min(t.height,i.height))]}(i,n),c=[A,r,i.width,i.height,0,0,i.width,i.height];return s.drawImage.apply(s,[t,...c]),c}function r(){return new Promise((t=>{window.requestAnimationFrame(t)}))}function c(t,i){i||(i={}),i.style||(i.style={}),i.text||(i.text="");const{style:e,text:s}=i;delete i.style,delete i.text;const n=Object.assign(document.createElement(t),i);return Object.keys(e).forEach((t=>n.style[t]=e[t])),n.innerHTML=s,n}const h=()=>{const t=document.createElement("style");return t.append("\n*::-webkit-media-controls-panel {\n  display: none !important;\n  -webkit-appearance: none;\n}\n*::-webkit-media-controls-play-button {\n  display: none !important;\n  -webkit-appearance: none;\n}\n*::-webkit-media-controls-start-playback-button {\n  display: none !important;\n  -webkit-appearance: none;\n}"),t.innerHTML},d={base:{display:"grid",gridTemplateRows:"1fr",width:"100%",height:"100%"},container:{position:"relative",display:"grid",gridTemplateRows:"1fr",overflow:"hidden",minHeight:"350px",padding:"0",margin:"0"},video:{height:"100%",width:"100%",objectFit:"cover",position:"absolute",top:"0"},input:{display:"none"},button:{position:"absolute",zIndex:"1",padding:"0.3em 0.6em",bottom:"1em",left:"50%",transform:"translateX(-50%)",color:"#FFFFFF",background:"transparent",borderRadius:"2px",border:"2px solid rgba(255, 255, 255, 0.75)",fontSize:"15px",textAlign:"center"}};var l;!function(t){t.INIT="Initializing component...",t.LOADING_CAMERAS="Detecting your cameras...",t.DETECTION_STARTED="Detection is starting...",t.DETECTION_IN_PROGRESS="Detection in progress...",t.DETECTION_DONE="Detection is stopping...",t.NO_DETECTION="No camera detected.",t.ACCESS_DENIED="Access denied",t.CHANGE_CAMERA="Change camera"}(l||(l={}));class w{constructor(t,i){this._status=t,this._isLogging=i}set status(t){this._status=t,this._isLogging&&console.log("[psk-barcode-scanner] Status:",this._status)}get status(){return this._status}}const u="No MultiFormat Readers were able to detect the code.",v={init:c("div",{style:d.button,text:"Booting camera..."}),active:c("button",{style:d.button,text:"Change camera"}),done:c("div",{style:d.button,text:"Scan complete!"}),error:c("div",{style:d.button,text:"No camera device found!"}),feedback:c("div",{style:d.button,text:"Checking permissions..."}),access_denied:c("div",{style:d.button,text:"Access denied..."})};v.active.setAttribute("change-camera","");const p=class{constructor(i){t(this,i),this.snapVideo=!1,this.useFrames=!1,this.useWebWorker=!0,this.useLogs=!0,this.stopInternalCropping=!1,this.state=new w(l.INIT,this.useLogs),this.devices=[],this.frame={canvas:null,source:null,points:[],filters:[]},this.initializeReferencesToElements=()=>{const t=this.host.shadowRoot.querySelector("#container");if(!t)return void console.error("[psk-barcode-scanner] Component can not render #container");const i=this.host.shadowRoot.querySelector("#video");i?(this.container=t,this.video=i):console.error("[psk-barcode-scanner] Component can not render #video")},this.initializeScanningMethod=async()=>{this.useWebWorker?this.scanWorker||(this.scanWorker=new Worker("webcardinal/extended/cardinal-barcode/worker/scan-worker.js")):this.scanWorker&&this.scanWorker.terminate()},this.createSlotElement=t=>this.host.querySelector(`[slot=${t}]`)?c("slot",{name:t}):(v[t].part=t,v[t]),this.attachOnClickForChangeCamera=()=>{const t=this.host.shadowRoot.querySelector("[change-camera]");t&&(t.onclick=async()=>await this.switchCamera())},this.renderContent=()=>{let t;switch(this.state.status){case l.INIT:t=this.createSlotElement("init");break;case l.NO_DETECTION:t=this.createSlotElement("error");break;case l.DETECTION_DONE:t=this.createSlotElement("done");break;case l.LOADING_CAMERAS:if(this.host.hasAttribute("dev-disable-some-slots"))return void(t="");t=this.createSlotElement("feedback");break;case l.ACCESS_DENIED:t=this.createSlotElement("access_denied");break;default:if(this.host.hasAttribute("dev-disable-some-slots"))return void(t="");t=this.createSlotElement("active")}const i=c("div");return i.append(t),i.innerHTML},this.drawOverlays=async()=>{if(!this.host||!this.host.shadowRoot||this.host.querySelector("[slot=active]"))return;const{shadowRoot:t}=this.host,i=t.querySelector("#video"),e=t.querySelector("#container"),{VideoOverlay:s}=await import("./p-31b4da5d.js");this.overlay=new s(e,i),this.overlay.createOverlaysCanvases("lensCanvas","overlayCanvas")&&this.overlay.drawLensCanvas()},this.cleanupOverlays=()=>{this.overlay&&this.overlay.removeOverlays()},this.onZXingBrowserLoad=async()=>{const t=new Map;t.set(3,!0),this.scanner=new window.ZXingBrowser.BrowserMultiFormatReader(t);const i=async()=>{await this.scan(),await async function(){return new Promise((t=>{const i=setTimeout((()=>{t(),clearTimeout(i)}),250)}))}(),this.state.status===l.DETECTION_IN_PROGRESS&&await i()};await i()},this.onVideoPlay=async()=>{this.cleanupOverlays(),await this.drawOverlays(),this.video.removeAttribute("hidden")},this.onCanvasPlay=async()=>{this.cleanupOverlays(),await this.drawOverlays(),this.frame.canvas.removeAttribute("hidden")},this.decodeCallback=(t,i,e)=>{if(i&&this.state.status===l.DETECTION_IN_PROGRESS){if(this.stopScanning(),this.useLogs&&console.log("[psk-barcode-scanner] Scanned data:",i),this.modelHandler){if(n.play(),this.overlay&&this.overlay.drawOverlay(i.resultPoints),this.snapVideo&&function(t){const i=t.videoHeight,e=t.videoWidth,s=document.createElement("canvas");s.id="snapVideo",s.width=e,s.height=i;const n=s.getContext("2d");s.style.position="absolute",s.style.width="100%",s.style.height="100%",s.style.objectFit="cover",n.drawImage(t,0,0,e,i),t.parentElement.insertBefore(s,t)}(this.video),this.useMetadata){i.frames=("invertedSymbols"===(s=e.canvas).id&&o({canvas:s}),{png:s.toDataURL("image/png"),jpg:s.toDataURL("image/jpeg")}),i.video={width:this.video.videoWidth,height:this.video.videoHeight},i.useWebWorker=this.useWebWorker;try{i.container=JSON.parse(JSON.stringify(this.container.getBoundingClientRect()))}catch(t){console.error("[psk-barcode-scanner] Could not log container dimensions!")}this.modelHandler.updateModel("results",i)}this.modelHandler.updateModel("data",i.text),this.snapVideo||this.cleanupOverlays()}this.stopVideoStream()}else{var s;"string"==typeof t&&t===u||"object"==typeof t&&t.message===u||console.error("[psk-barcode-scanner] Error while decoding",t)}},this.decode=async(t,i)=>{if(this.state.status===l.DETECTION_DONE)return;A(this.frame.source,t,{points:this.frame.points,stopInternalCropping:this.stopInternalCropping});const e=t.id;if("function"==typeof i){const e={canvas:t};await i(e)}if(!this.useWebWorker){if(this.scanner)try{const i=this.scanner.decodeFromCanvas(t);i.filter={name:e,width:t.width,height:t.height},this.decodeCallback(void 0,i,{canvas:t})}catch(t){this.decodeCallback(t,void 0,void 0)}return}const s=t.getContext("2d"),{width:n,height:o}=t,a=s.getImageData(0,0,n,o);this.scanWorker.postMessage({message:"start decoding",imageData:a,width:n,height:o,filterId:e})},this.scan=async()=>{await Promise.all(this.frame.filters.map((({filterAction:t})=>t())))},this.createFilter=(t,i)=>{const e=function(t){const i=document.createElement("canvas"),e=i.getContext("2d");return i.width=t.width,i.height=t.height,e.drawImage(t,0,0),i}(this.frame.canvas);e.id=t,e.style.width="unset",e.style.height="unset",this.host.hasAttribute("dev-activate-internal-canvases")&&(e.style.position="fixed",e.style.left="0",e.style.top="0",e.style.objectFit="unset",e.style.zIndex="1000",e.style.display="none",this.host.shadowRoot.append(e)),this.frame.filters.push({filterId:t,filterAction:()=>this.decode(e,i)})},this.createFilters=()=>{if(this.useWebWorker){const t=new Set;this.scanWorker.addEventListener("message",(async i=>{const{error:e,result:s,filterId:n,metadata:o}=i.data;e&&!this.useFrames&&(t.add(n),t.size===this.frame.filters.length&&(t.clear(),await this.scan()));let a=void 0;!e&&this.useMetadata&&(a=c("canvas",{id:n,width:o.width,height:o.height}),a.getContext("2d").putImageData(o.imageData,0,0)),this.decodeCallback(e,s,{canvas:a})})),this.scanWorker.addEventListener("error",(t=>{console.error("[psk-barcode-scanner] scan-worker error",t)}))}this.createFilter("default",void 0),this.createFilter("invertedSymbols",o)},this.startVideoStream=async t=>{var i,e,s,n,o;let a=this.container.offsetWidth,r=this.container.offsetHeight;if((null===(s=null===(e=null===(i=window.WebCardinal)||void 0===i?void 0:i.state)||void 0===e?void 0:e.page)||void 0===s?void 0:s.loader)&&0===a){const t=window.WebCardinal.state.page.loader.parentElement,i=t.style.display;t.style.display="unset",a=this.container.offsetWidth,r=this.container.offsetHeight,(null===(o=null===(n=null===window||void 0===window?void 0:window.cardinal)||void 0===n?void 0:n.barcodeScanner)||void 0===o?void 0:o.dimensions)&&(window.cardinal.barcodeScanner.dimensions.width=a,window.cardinal.barcodeScanner.dimensions.height=r),t.style.display=i}const h=this.video,d={audio:!1,video:{facingMode:"environment",width:{ideal:3*a},height:{ideal:3*r}}};t&&"no-camera"!==t&&(delete d.video.facingMode,d.video.deviceId={exact:t});try{const t=c("canvas",{id:"videoCanvas",width:a,height:r}),i=await navigator.mediaDevices.getUserMedia(d);await function(t,i){return new Promise((e=>{t.addEventListener("loadedmetadata",(()=>e()),!1),t.srcObject=i}))}(h,i);const e=A(h,t,{stopInternalCropping:this.stopInternalCropping});this.frame={canvas:t,source:h,points:e,filters:[]}}catch(t){this.state.status=l.ACCESS_DENIED,console.error("[psk-barcode-scanner] Error while getting userMediaStream",t)}if(h.srcObject){try{const t=h.srcObject.getVideoTracks();for(let i=0;i<t.length;i++){const e=t[i];if("live"===e.readyState){this.activeDeviceId=e.getSettings().deviceId,"psk-scanner-device-id","localStorage"in window&&localStorage.setItem("psk-scanner-device-id",this.activeDeviceId);break}}}catch(t){console.error("[psk-barcode-scanner] Error while getting activeDeviceId",t)}this.createFilters(),await this.scan()}},this.stopVideoStream=()=>{if(!this.video)return;const t=this.video.srcObject;t&&(t.getTracks().forEach((t=>t.stop())),this.video.srcObject=null)},this.stopScanning=()=>{this.state.status=l.DETECTION_DONE,this.scanWorker&&(this.scanWorker.terminate(),this.scanWorker=void 0),this.host.hasAttribute("dev-activate-internal-canvases")&&this.frame.filters.forEach((({filterId:t})=>{const i=this.host.shadowRoot.getElementById(t);i&&i.remove()})),this.frame.filters=[],delete this.frame.canvas,delete this.frame.source,delete this.frame.points},window.addEventListener("resize",(async()=>{await r(),this.cleanupOverlays(),await this.drawOverlays()}))}async switchCamera(){const t=this.devices.map((t=>t.deviceId)),i=t.indexOf(this.activeDeviceId);this.activeDeviceId=t[-1===i?0:(i+1)%t.length],this.stopScanning(),this.stopVideoStream(),this.state.status=l.CHANGE_CAMERA}async setFrame(t){if(!this.useFrames)return;this.host&&this.host.shadowRoot||await this.host.componentOnReady();const i=await async function(t){return new Promise((i=>{const e=new Image;e.addEventListener("load",(()=>i(e))),e.src=t}))}(t);if(!this.frame.canvas){const t=this.host.shadowRoot.querySelector("#frame"),{width:e,height:s}=this.container.getBoundingClientRect();t.width=Math.floor(e),t.height=Math.floor(s);const n=A(i,t,{stopInternalCropping:this.stopInternalCropping});return this.frame={canvas:t,source:i,points:n,filters:[]},await this.onCanvasPlay(),await this.createFilters(),void await this.scan()}this.frame.source=i,A(this.frame.source,this.frame.canvas,{stopInternalCropping:this.stopInternalCropping}),await this.scan()}async componentWillLoad(){if(!this.host.isConnected)return;this.state.status=l.LOADING_CAMERAS;try{this.devices=await async function(){if(!window.navigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!window.navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=await navigator.mediaDevices.enumerateDevices(),i=[];for(const e of t){const{kind:t}=e;"videoinput"===t&&i.push({deviceId:e.deviceId,label:e.label||"Video device "+(i.length+1),kind:t,groupId:e.groupId})}return i}()}catch(t){console.error("[psk-barcode-scanner] Error while getting video devices",t)}if(this.host.hasAttribute("results")&&(this.useMetadata=!0),this.useFrames)return void(this.state.status=l.DETECTION_STARTED);const t=function(){if("localStorage"in window)return localStorage.getItem("psk-scanner-device-id")}();t&&(this.activeDeviceId=t),this.state.status=0!==this.devices.length?l.DETECTION_STARTED:l.NO_DETECTION}async componentDidRender(){switch(this.state.status){case l.DETECTION_STARTED:case l.CHANGE_CAMERA:this.state.status=l.DETECTION_IN_PROGRESS,this.initializeReferencesToElements(),this.attachOnClickForChangeCamera(),await this.initializeScanningMethod(),await(t=this.video,50,new Promise((i=>{if(a(t))return void i();const e=setInterval((()=>{if(a(t))return i(),void clearInterval(e)}),50)}))),await r(),this.useFrames||await this.startVideoStream(this.activeDeviceId)}var t}async disconnectedCallback(){this.stopScanning(),this.stopVideoStream()}render(){return[i("style",null,h()),this.useWebWorker?null:i("script",{async:!0,src:"webcardinal/extended/cardinal-barcode/worker/zxing-browser.min.js",onLoad:this.onZXingBrowserLoad}),i("div",{part:"base",style:d.base},i("div",{id:"container",part:"container",style:d.container},i("input",{type:"file",accept:"video/*",capture:"environment",style:d.input}),i("video",{id:"video",part:"video",onPlay:this.onVideoPlay,autoplay:!0,playsinline:!0,hidden:!0,style:d.video}),i("canvas",{id:"frame",part:"frame",hidden:!0,style:d.video}),i("div",{id:"content",part:"content",innerHTML:this.renderContent()})))]}get host(){return e(this)}};!function(t,i,e,s){var n,o=arguments.length,a=o<3?i:null===s?s=Object.getOwnPropertyDescriptor(i,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,i,e,s);else for(var A=t.length-1;A>=0;A--)(n=t[A])&&(a=(o<3?n(a):o>3?n(i,e,a):n(i,e))||a);o>3&&a&&Object.defineProperty(i,e,a)}([s()],p.prototype,"modelHandler",void 0);export{p as psk_barcode_scanner}